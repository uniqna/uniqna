{% load bleach_tags %} {% load timesince_upto %} {% if instance.question %}
<div class="mdl-cell mdl-cell--12-col {{divclass}}">
    <div class="mdl-grid platform">
        <div class="mdl-cell mdl-cell--1-col voting">
            <div class="mdl-grid voting">
                <div class="mdl-cell mdl-cell--1-col votes upvote_margin">
                    <button data-url="{% url 'question_vote' instance.question.pk 'u' %}" class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect upvote snackbar_show" data-id="{{instance.question.pk}}">
                    <i class="material-icons votecolor {% if request.user in instance.question.ups.all %} vote-success {% else %} vote-default {% endif %}" id="up{{ instance.question.pk }}">expand_less</i>
                    </button>
                </div>
                <div class="mdl-cell mdl-cell--1-col score" id="score{{instance.question.pk}}">
                    <center>{{ instance.question.points }}</center>
                </div>
                <div class="mdl-cell mdl-cell--1-col votes">
                    <button data-url="{% url 'question_vote' instance.question.pk 'd' %}" class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect downvote snackbar_show" data-id="{{instance.question.pk}}">
                    <i class="material-icons votecolor {% if request.user in instance.question.downs.all %} vote-danger {% else %} vote-default {% endif %}" id="down{{instance.question.pk}}">expand_more</i>
                    </button>
                </div>
            </div>
        </div>

        {% if instance.question.flair != Null %}
        <div id="flair-{{ instance.question.pk }}" class="flair"><i class="material-icons">{{ instance.question.flair_icon }}</i></div>
        <div class="mdl-tooltip mdl-tooltip--left" data-mdl-for="flair-{{ instance.question.pk }}">
          {{ instance.question.flair }}
        </div>
        {% endif %}

        <div class="title">
            <div class="date">{% if instance.question.metatype == "question" %}Asked{% else %}Submitted{% endif %}&nbsp{{ instance.question.created_time|timesince|upto:',' }} ago by <a href="{% url 'user' instance.question.author %}" class="authorlink">{{ instance.question.author }}</a>&nbsp&nbsp<small class="answers">{{ instance.question.answers }} {% if instance.question.metatype == "question" %}Answers{% else %}Replies{% endif %}</small>
            </div>
            <a href="{% url 'thread' instance.question.pk instance.question.title|slugify %}" class="a_title">{{ instance.question.title }}</a> {% if instance.question.solved == True and instance.question.metatype == "question" %}
            <i class="material-icons solved">check</i> {% endif %}
            <div class="tags">
                {% for tag in instance.question.tags.all %} <a href="{% url 'tags' tag.name %}">#{{tag.name}}</a> {% endfor %} &nbsp
            </div>
        </div>
    </div>
    <div class="mdl-grid platform platform_answer">
        <div class="mdl-cell mdl-cell--1-col answer_align_fix">
            <div class="mdl-grid voting-align_answer">
                    <div class="mdl-cell mdl-cell--1-col votes voting_align">
                            <button data-url="{% url 'answer_vote' instance.pk 'u' %}" class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect ansUpvote snackbar_show" data-id="{{instance.pk}}">
                    <i class="material-icons votecolor {% if request.user in instance.ups.all %} vote-success {% else %} vote-default {% endif %} ansUp{{instance.pk}}">expand_less</i>
                    </button>
                    </div>
                    <div class="mdl-cell mdl-cell--1-col score ansScore{{instance.pk}}">
                        <center>{{ instance.points }}</center>
                    </div>
                    <div class="mdl-cell mdl-cell--1-col votes voting_align">
                            <button data-url="{% url 'answer_vote' instance.pk 'd' %}" class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect ansDownvote snackbar_show" data-id="{{instance.pk}}">
                    <i class="material-icons votecolor{% if request.user in instance.downs.all %} vote-danger {% else %} vote-default {% endif %} ansDown{{instance.pk}}">expand_more</i>
                    </button>
                    </div>
                </div>
        </div>
        <div class="answer mdl-cell mdl-cell--12-col">
            <p>{{instance.description|bleach|truncatechars_html:500 }}
                <a href="{% url 'thread' instance.question.pk instance.question.title|slugify %}#a{{instance.pk}}" class="viewans"><br>View answer</a>
            </p>
        </div>
        {% if instance.question.edited == True%}<br>{% endif %}
        <div class="meta_parent">
            <div class="mdl-cell mdl-cell--5-col answer_author_meta">
                {% if instance.question.edited %}
                {{ instance.question.created_time }}*
                {% else %}
                {{ instance.question.created_time }} {% endif %}
            </div>
        </div>
    </div>
</div>
{% else %}
<div class="mdl-cell mdl-cell--12-col {{divclass}}">
  <div class="mdl-grid platform">
      <div class="mdl-cell mdl-cell--1-col voting">
          <div class="mdl-grid voting">
              <div class="mdl-cell mdl-cell--1-col votes upvote_margin">
                      <button data-url="{% url 'question_vote' instance.pk 'u' %}" class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect upvote snackbar_show" data-id="{{instance.pk}}">
              <i class="material-icons votecolor {% if request.user in instance.ups.all %} vote-success {% else %} vote-default {% endif %}"  id="up{{ instance.pk }}">expand_less</i>
              </button>
              </div>
              <div class="mdl-cell mdl-cell--1-col score" id="score{{instance.pk}}">
                  <center>{{ instance.points }}</center>
              </div>
              <div class="mdl-cell mdl-cell--1-col votes">
                      <button data-url="{% url 'question_vote' instance.pk 'd' %}" class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect downvote snackbar_show" data-id="{{instance.pk}}">
              <i class="material-icons votecolor {% if request.user in instance.downs.all %} vote-danger {% else %} vote-default {% endif %}" id="down{{instance.pk}}">expand_more</i>
              </button>
              </div>
          </div>
      </div>

      {% if instance.flair != Null %}
      <div id="flair-{{ instance.pk }}" class="flair"><i class="material-icons">{{ instance.flair_icon }}</i></div>
      <div class="mdl-tooltip mdl-tooltip--left" data-mdl-for="flair-{{ instance.pk }}">
        {{ instance.flair }}
      </div>
      {% endif %}

      <div class="title">
          <div class="date">{% if instance.question.metatype == "question" %}Asked{% else %}Submitted{% endif %}&nbsp{{ instance.created_time|timesince|upto:',' }} ago by <a href="{% url 'user' instance.author %}" class="authorlink">{{ instance.author }}</a>&nbsp&nbsp<small class="answers">{{ instance.answers }} {% if instance.metatype == "question" %}Answers{% else %}Replies{% endif %}</small>
          </div>
          <a href="{% url 'thread' instance.pk instance.title|slugify %}" class="a_title">{{ instance.title }}</a> {% if instance.solved == True and instance.metatype == "question" %}
          <i class="material-icons solved">check</i> {% endif %}
          <div class="tags">
           {% for t in instance.tags.all %}
                   <a href="{% url 'tags' t.name %}">#{{t.name}}</a>
              {% endfor %}
            &nbsp
          </div>
      </div>
  </div>
</div>
{% endif %}
